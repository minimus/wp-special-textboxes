(function(n){function p(n,t){return Math.floor(Math.random()*(t-n+1))+n}function r(){if(r.history=r.history||[],r.history.push(arguments),"object"==typeof console){var t=console[console.warn?"warn":"log"],n=Array.prototype.slice.call(arguments),i;typeof arguments[0]=="string"&&(n[0]="qTip2: "+n[0]);i=t.apply?t.apply(console,n):t(n)}}function w(){this.themes=[];this.getIndex=function(t){var i=-1;return n.each(this.themes,function(n,r){return r.name==t?(i=n,!1):!0}),i};this.getTheme=function(n){return this.themes[this.getIndex(n)]};this.register=function(n,t){this.themes.push(t);this.themes[this.themes.length-1].name=n};this.update=function(t,i){n.extend(!0,this.themes[this.getIndex(t)],i)}}function u(n){var t=n.replace("#",""),i=parseInt("0x"+t.slice(0,2)),r=parseInt("0x"+t.slice(2,4)),u=parseInt("0x"+t.slice(4,6));return i.toString()+","+r.toString()+","+u.toString()}function b(t,i){var u={},f={},r={};return typeof i=="undefined"?r=e:typeof i=="object"&&null!=i?(r=e,n.extend(!0,f,r,i),r=f):r=e,typeof t=="string"?-1==stbThemes.getIndex(t)?n.extend(!0,u,stbThemes.getTheme("warning"),r):n.extend(!0,u,stbThemes.getTheme(t),r):typeof t=="object"&&null!=t?n.extend(!0,u,stbThemes.getTheme("warning"),r,t):n.extend(!0,u,stbThemes.getTheme("warning"),r),u}function k(n,t,i,r){for(var s=r.shadow.blur,e=r.shadow.offsetX,o=r.shadow.offsetY,f=1;f<s;f++)n.fillStyle="rgba("+u(r.shadow.color)+", "+r.shadow.alpha+")",n.beginPath(),n.moveTo(f+e,r.radius+o),n.lineTo(f+e,i-r.radius),n.quadraticCurveTo(f+e,i-f,r.radius+e,i-f),n.lineTo(t-r.radius,i-f),n.quadraticCurveTo(t-f,i-f,t-f,i-r.radius),n.lineTo(t-f,r.radius+o),n.quadraticCurveTo(t-f,f+o,t-r.radius,f+o),n.lineTo(r.radius+e+f,f+o),n.quadraticCurveTo(f+e,f+o,f+e,r.radius+o),n.closePath(),n.fill()}function d(n,t,i,r){i-=r.shadow.offsetY;t-=r.shadow.offsetX;n.fillStyle="rgba(255,255,255,1)";var u=n.createLinearGradient(0,0,0,i);u.addColorStop(0,r.color);u.addColorStop(.4,r.color);u.addColorStop(1,r.colorTo);n.beginPath();n.moveTo(0,r.radius);n.lineTo(0,i-r.radius);n.quadraticCurveTo(0,i,r.radius,i);n.lineTo(t-r.radius,i);n.quadraticCurveTo(t,i,t,i-r.radius);n.lineTo(t,r.radius);n.quadraticCurveTo(t,0,t-r.radius,0);n.lineTo(r.radius,0);n.quadraticCurveTo(0,0,0,r.radius);n.closePath();n.fillStyle=u;n.fill()}function o(n,t,i,r,f){for(var h=r.shadow.blur,o=r.shadow.offsetX,s=r.shadow.offsetY,e=1;e<h;e++)n.fillStyle="rgba("+u(r.shadow.color)+", "+r.shadow.alpha+")",n.beginPath(),n.moveTo(e+o,r.radius+s),f?(n.lineTo(e+o,i-r.radius),n.quadraticCurveTo(e+o,i-e,r.radius+o,i-e),n.lineTo(t-r.radius-1,i-e),n.quadraticCurveTo(t-e,i-e,t-e,i-r.radius)):(n.lineTo(e+o,i),n.lineTo(t-e,i)),n.lineTo(t-e,r.radius+s),n.quadraticCurveTo(t-e,e+s,t-r.radius,e+s),n.lineTo(r.radius+o+e,e+s),n.quadraticCurveTo(e+o,e+s,e+o,r.radius+s),n.closePath(),n.fill()}function g(n,t,i,r,f,e,s,h){var v=s.shadow.blur,l=s.shadow.offsetX,a=0,c;for(o(t,f,e,s,h),c=1;c<v;c++)n.fillStyle="rgba("+u(s.shadow.color)+", "+s.shadow.alpha+")",n.beginPath(),n.moveTo(c+l,a),n.lineTo(c+l,r-s.radius),n.quadraticCurveTo(c+l,r-c,s.radius+l,r-c),n.lineTo(i-s.radius,r-c),n.quadraticCurveTo(i-c,r-c,i-c,r-s.radius),n.lineTo(i-c,a),n.lineTo(l+c,a),n.closePath(),n.fill()}function s(t,i,r,u,f){var s,h,e,o,c;f&&(r-=u.shadow.offsetY);i-=u.shadow.offsetX;s=null!=u.image?35:10;h=u.direction=="ltr"?s:i-s;t.fillStyle="rgba(255,255,255,1)";e=t.createLinearGradient(0,0,0,r);e.addColorStop(0,u.caption.color);e.addColorStop(.4,u.caption.color);e.addColorStop(1,u.caption.colorTo);t.beginPath();t.moveTo(0,u.radius);f?(t.lineTo(0,r-u.radius),t.quadraticCurveTo(0,r,u.radius,r),t.lineTo(i-u.radius,r),t.quadraticCurveTo(i,r,i,r-u.radius)):(t.lineTo(0,r),t.lineTo(i,r));t.lineTo(i,u.radius);t.quadraticCurveTo(i,0,i-u.radius,0);t.lineTo(u.radius,0);t.quadraticCurveTo(0,0,0,u.radius);t.closePath();t.fillStyle=e;t.fill();t.textAlign=u.direction=="ltr"?"left":"right";t.textBaseline="middle";t.fillStyle=u.caption.fontColor;t.font=u.caption.fontSize+"px "+u.caption.fontFamily;n.browser.safari?(o=u.caption.fontSize,c=t.measureText(u.caption.text).width,c>i-80&&(o=Math.floor(o*((i-80)/c)),t.font=o+"px "+u.caption.fontFamily),t.fillText(u.caption.text,h,r/2)):i>150&&t.fillText(u.caption.text,h,r/2,i-75)}function nt(n,t,i,r,u,f,e,o){r-=e.shadow.offsetY;i-=e.shadow.offsetX;s(t,u,f,e,o);n.fillStyle="rgba(255,255,255,1)";var h=n.createLinearGradient(0,0,0,r);h.addColorStop(0,e.color);h.addColorStop(.4,e.color);h.addColorStop(1,e.colorTo);n.beginPath();n.moveTo(0,0);n.lineTo(0,r-e.radius);n.quadraticCurveTo(0,r,e.radius,r);n.lineTo(i-e.radius,r);n.quadraticCurveTo(i,r,i,r-e.radius);n.lineTo(i,0);n.lineTo(0,0);n.closePath();n.fillStyle=h;n.fill()}function tt(n,t,i,r){var o,e,f;for(i-=r.shadow.offsetY,t-=r.shadow.offsetX,o=r.border.width,e=.7,f=2;f<o;f++)n.beginPath(),n.moveTo(f,r.radius+f),n.lineTo(f,i-r.radius-f),n.quadraticCurveTo(f,i-f,r.radius+f,i-f),n.lineTo(t-r.radius-f,i-f),n.quadraticCurveTo(t-f,i-f,t-f,i-r.radius-f),n.lineTo(t-f,r.radius+f),n.quadraticCurveTo(t-f,f,t-r.radius-f,f),n.lineTo(r.radius+f,f),n.quadraticCurveTo(f,f,f,r.radius+f),n.closePath(),n.strokeStyle="rgba("+u(r.border.color)+","+e+")",n.stroke(),e-=1/o,e<0&&(e=0)}function h(n,t,i,r){r.complete&&null!=i.image&&t.drawImage(r,i.direction=="ltr"?i.imgX:n.width-i.shadow.offsetX-i.imgX-50,i.imgY,50,50)}function c(n,t,i,r,u,f,e,o){r.complete&&null!=i.image&&(e=="all"||e=="main")&&t.drawImage(r,i.direction=="ltr"?i.imgX:n.width-i.shadow.offsetX-i.imgX-25,(o?n.height-i.shadow.offsetX:n.height)/2-12,25,25);i.caption.collapsing&&u.complete&&f.complete&&(e=="all"||e=="tool")&&t.drawImage(o?f:u,i.direction=="ltr"?n.width-i.shadow.offsetX-i.imgX*2-16:i.imgX*2,(o?n.height-i.shadow.offsetX:n.height)/2-8,16,16)}function f(n,i,r){var u=t[n].options,f=u.caption.text!=""?t[n].container.ccvs:t[n].container.cvs,e=u.caption.text!=""?t[n].container.cctx:t[n].container.ctx,o=t[n].image,s=t[n].imgMinus,l=t[n].imgPlus;typeof i=="undefined"&&(i="all");typeof r=="undefined"&&(r=u.caption.collapsed);u.caption.text!=""?c(f,e,u,o,s,l,i,r):h(f,e,u,o)}function l(n,i){var u=t[n].options,r=t[n].container.ccvs,e=t[n].container.cctx,h=t[n].image;r.height=i?30+u.shadow.offsetY:30;e.clearRect(0,0,r.width,r.height);u.shadow.enabled&&o(e,r.width,r.height,u,i);s(e,r.width,r.height,u,i);f(n,"all",i)}function it(n,t,i){var r=n.getContext("2d");r.clearRect(0,0,n.width,n.height);t.shadow.enabled&&k(r,n.width,n.height,t);d(r,n.width,n.height,t);h(n,r,t,i);t.border.width>0&&tt(r,n.width,n.height,t)}function rt(n,t,i,r,u,f,e){var s=n.getContext("2d"),o=t.getContext("2d");s.clearRect(0,0,n.width,n.height);o.clearRect(0,0,t.width,t.height);i.shadow.enabled&&g(s,o,n.width,n.height,t.width,t.height,i,e);nt(s,o,n.width,n.height,t.width,t.height,i,e);c(t,o,i,r,u,f,"all",e)}function a(t,i){var f;if(t){var r=t.container.cvs,h=t.container.cnt,u=t.options,e=n(h).parent(0).width(),o=n(h).outerHeight(),s=t.options.caption;(i||r.width!=e||r.height!=o+u.shadow.offsetY+20)&&(r.width=e,s.text==""?(r.height=o+u.shadow.offsetY+20,it(r,u,t.image,t.image.complete)):(f=t.container.ccvs,r.height=o+u.shadow.offsetY+10,f.width=e,f.height=30,s.collapsed&&(f.height+=u.shadow.offsetY),rt(r,f,u,t.image,t.imgMinus,t.imgPlus,s.collapsed)))}}function v(i){t.length>0&&n.each(t,function(n,t){a(t,i)})}function y(n,t,i,r){this.container=n;this.options=t;this.caption=i;this.isDrawing=!1;this.index=r;this.image=new Image;this.imgMinus=new Image;this.imgPlus=new Image}var i={alert:{image:"alert-b.png",color:"#fdcbc9",colorTo:"#fb7d78",fontColor:"#000000",border:{width:5,color:"#f9574f"},caption:{fontColor:"#ffffff",color:"#1d1a1a",colorTo:"#504848"}},black:{image:"earth-b.png",color:"#3b3b3b",colorTo:"#000000",fontColor:"#ffffff",border:{width:0,color:"#535353"},caption:{fontColor:"#ffffff",color:"#1d1a1a",colorTo:"#504848"}},download:{image:"download-b.png",color:"#78c0f7",colorTo:"#2e7cb9",fontColor:"#000000",border:{width:5,color:"#15609a"},caption:{fontColor:"#ffffff",color:"#1d1a1a",colorTo:"#504848"}},info:{image:"info-b.png",color:"#a1ea94",colorTo:"#79b06e",fontColor:"#000000",border:{width:0,color:"#6c9c62"},caption:{fontColor:"#ffffff",color:"#1d1a1a",colorTo:"#504848"}},warning:{image:"warning-2-b.png",color:"#f8fc91",colorTo:"#f0d208",fontColor:"#000000",border:{width:0,color:"#d9be08"},caption:{fontColor:"#ffffff",color:"#1d1a1a",colorTo:"#504848"}}},e={caption:{text:"",fontFamily:"Impact, Verdana",fontSize:12,collapsed:!1,collapsing:!0,imgMinus:"minus.png",imgPlus:"plus.png",duration:500},imgX:5,imgY:10,radius:10,direction:"ltr",mtop:10,mright:10,mbottom:10,mleft:10,safe:!1,shadow:{enabled:!0,offsetX:7,offsetY:7,blur:5,alpha:.15,color:"#000000"},textShadow:{enabled:!0,offsetX:1,offsetY:1,blur:3,alpha:.15,color:"#000000"},handlers:[{hClass:"a[id^=tabs]",hEvent:"click"},{hClass:"li[id^=tabs]",hEvent:"click"}]},t=[];stbThemes=new w;stbThemes.register("alert",i.alert);stbThemes.register("black",i.black);stbThemes.register("download",i.download);stbThemes.register("info",i.info);stbThemes.register("warning",i.warning);jQuery.fn.extend({stb:function(i,u){var e=b(i,u);return this.each(function(){var i={},h,u=n(this).attr("id"),o=n(this).data("stb"),k=n(this).css("line-height"),w;try{h=typeof o=="string"?new Function("return "+o)():o;typeof h=="object"?n.extend(!0,i,e,h):i=e}catch(it){r("Unable to parse HTML5 attribute data: "+o)}var d=i.lineHeight,g={direction:i.direction,"unicode-bidi":"embed",color:i.fontColor,position:"absolute",top:"0px","z-index":4,"padding-right":i.image==null?"5px":i.direction=="ltr"?"5px":"50px","padding-bottom":"5px","padding-top":"5px","padding-left":i.image==null?"5px":i.direction=="ltr"?"50px":"5px","min-height":"40px","margin-top":i.mtop+"px","margin-right":i.mright+i.shadow.offsetX+"px","margin-bottom":i.mbottom+"px","margin-left":i.mleft+"px","box-sizing":"content-box","line-height":d,"text-shadow":i.textShadow.enabled?i.textShadow.color+" "+i.textShadow.offsetX+"px "+i.textShadow.offsetY+"px "+i.textShadow.blur+"px":"none"},nt={direction:i.direction,"unicode-bidi":"embed",position:"absolute",top:"30px",color:i.fontColor,padding:"5px 5px 5px 5px","min-height":"5px","margin-top":"0px","margin-right":i.mright+i.shadow.offsetX+"px","margin-bottom":i.mbottom+"px","margin-left":i.mleft+"px","box-sizing":"content-box","z-index":4,"line-height":k,"text-shadow":i.textShadow.enabled?i.textShadow.color+" "+i.textShadow.offsetX+"px "+i.textShadow.offsetY+"px "+i.textShadow.blur+"px":"none"};if(typeof u=="undefined"&&(u="stb_js_"+p(1e3,9999),n(this).attr("id",u)),i.caption.text==""){n(this).css(g).wrap('<div id="'+u+'_container" class="stb-container"><\/div>');n("#"+u+"_container").css({direction:i.direction,"margin-top":i.mtop+"px","margin-right":i.mright+"px","margin-bottom":i.mbottom+"px","margin-left":i.mleft+"px",position:"relative","box-sizing":"content-box"});n(this).before('<canvas id="'+u+'_canvas" class="stb-canvas" width="0" height="0" ><\/canvas>');n("#"+u+"_canvas").css({position:"relative",top:"0px",left:"0px","box-sizing":"content-box"});var s=n("#"+u+"_canvas").get(0),c=s.getContext("2d"),a=n(this).get(0),v=new y({cnt:a,cvs:s,ctx:c},i,i.caption,t.length)}else{n(this).css(nt).wrap('<div id="'+u+'_container" class="stb-container" style="line-height: 0.1em;"><\/div>');n("#"+u+"_container").css({direction:i.direction,"margin-top":i.mtop+"px","margin-right":i.mright+"px","margin-bottom":i.mbottom+"px","margin-left":i.mleft+"px",position:"relative","box-sizing":"content-box"});n(this).before('<canvas id="'+u+'_ccanvas" class="stb-ccanvas" width="0" height="0" ><\/canvas>');n("#"+u+"_ccanvas").css({"box-sizing":"content-box"});n(this).before('<canvas id="'+u+'_canvas" class="stb-canvas" width="0" height="0" ><\/canvas>');n("#"+u+"_canvas").css({position:"relative",left:"0px","box-sizing":"content-box"});w=n("body").css("direction");w!=i.direction&&n("#"+u+"_ccanvas").attr("dir",i.direction).css({"unicode-bidi":"bidi-override"});i.safe&&n("#"+u+"_canvas").css({position:"relative",top:"0px",left:"0px"});var s=n("#"+u+"_canvas").get(0),c=s.getContext("2d"),b=n("#"+u+"_ccanvas").get(0),tt=b.getContext("2d"),a=n(this).get(0),v=new y({cnt:a,cvs:s,ctx:c,ccvs:b,cctx:tt},i,i.caption,t.length);i.caption.collapsing&&n("#"+u+"_ccanvas").click(function(){var f=n(this).attr("id"),i="#"+f.replace("_ccanvas",""),u=i+"_canvas",r=n(i).data("stb_props");n(i).is(":hidden")?(l(r.index,!1),n(i).effect("blind",{mode:"show",direction:"vertical"},r.caption.duration,function(){var r=n(i).data("stb_props");r.caption.collapsed=!1;t[r.index].caption.collapsed=!1;n(i).data("stb_props",r)})):n(i).effect("blind",{mode:"hide",direction:"vertical"},r.caption.duration,function(){var r=n(i).data("stb_props");r.caption.collapsed=!0;t[r.index].caption.collapsed=!0;n(i).data("stb_props",r);l(r.index,!0)});n(u).is(":hidden")?n(u).effect("blind",{mode:"show",direction:"vertical"},r.caption.duration):n(u).effect("blind",{mode:"hide",direction:"vertical"},r.caption.duration)})}t.push(v);n.data(t[t.length-1].image,"itemIndex",t.length-1);n.data(t[t.length-1].imgMinus,"itemIndex",t.length-1);n.data(t[t.length-1].imgPlus,"itemIndex",t.length-1);t[t.length-1].image.onload=function(){var t=n.data(this,"itemIndex");f(t,"main")};t[t.length-1].image.src=t[t.length-1].options.image;t[t.length-1].imgMinus.onload=function(){var t=n.data(this,"itemIndex");f(t,"tool")};t[t.length-1].imgMinus.src=t[t.length-1].options.caption.imgMinus;t[t.length-1].imgPlus.onload=function(){var t=n.data(this,"itemIndex");f(t,"tool")};t[t.length-1].imgPlus.src=t[t.length-1].options.caption.imgPlus;n(this).data("stb_props",v).addClass("stb-body");i.caption.collapsed&&(n(this).hide(),n("#"+u+"_canvas").hide())}),v(!0),!1},stbRedraw:function(){this.each(function(){var t=n(this).data("stb_props");a(t,!0)})}});n(window).resize(function(){return v(!0),!1})})(jQuery)