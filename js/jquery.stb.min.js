(function(n){function y(n,t){return Math.floor(Math.random()*(t-n+1))+n}function u(){if(u.history=u.history||[],u.history.push(arguments),"object"==typeof console){var t=console[console.warn?"warn":"log"],n=Array.prototype.slice.call(arguments),i;typeof arguments[0]=="string"&&(n[0]="qTip2: "+n[0]);i=t.apply?t.apply(console,n):t(n)}}function p(){this.themes=[];this.getIndex=function(t){var i=-1;return n.each(this.themes,function(n,r){return r.name==t?(i=n,!1):!0}),i};this.getTheme=function(n){return this.themes[this.getIndex(n)]};this.register=function(n,t){this.themes.push(t);this.themes[this.themes.length-1].name=n};this.update=function(t,i){n.extend(!0,this.themes[this.getIndex(t)],i)}}function w(n,t){var i=n.replace("#",""),r=parseInt("0x"+i.slice(0,2)),u=parseInt("0x"+i.slice(2,4)),f=parseInt("0x"+i.slice(4,6));return"rgba("+r.toString()+","+u.toString()+","+f.toString()+","+t+")"}function b(t){var i,r,u;return t||(t=window.event),t.target?i=t.target:t.srcElement&&(i=t.srcElement),i.nodeType==3&&(i=i.parentNode),r=t.pageX-n(i).offset().left,u=t.pageY-n(i).offset().top,{x:r,y:u}}function k(t,i){var u={},f={},r={};return typeof i=="undefined"?r=e:typeof i=="object"&&null!=i?(r=e,n.extend(!0,f,r,i),r=f):r=e,typeof t=="string"?-1==stbThemes.getIndex(t)?n.extend(!0,u,stbThemes.getTheme("warning"),r):n.extend(!0,u,stbThemes.getTheme(t),r):typeof t=="object"&&null!=t?n.extend(!0,u,stbThemes.getTheme("warning"),r,t):n.extend(!0,u,stbThemes.getTheme("warning"),r),u}function o(t,i,r,u,f){var e=u.mtop,s=r-u.mbottom,o=u.mleft,h=i-u.mright,c,l,a,y,p,v,w;"undefined"==typeof f&&(f=0);t.fillStyle="rgba(255,255,255,1)";c=t.createLinearGradient(o,e,o,s);c.addColorStop(0,u.color);c.addColorStop(.4,u.color);c.addColorStop(1,u.colorTo);u.shadow.enabled&&(t.shadowColor=u.shadow.color,t.shadowBlur=u.shadow.blur,t.shadowOffsetX=u.shadow.offsetX,t.shadowOffsetY=u.shadow.offsetY);t.beginPath();t.moveTo(o,e+u.radius);t.lineTo(o,s-u.radius);t.quadraticCurveTo(o,s,o+u.radius,s);t.lineTo(h-u.radius,s);t.quadraticCurveTo(h,s,h,s-u.radius);t.lineTo(h,e+u.radius);t.quadraticCurveTo(h,e,h-u.radius,e);t.lineTo(o+u.radius,e);t.quadraticCurveTo(o,e,o,e+u.radius);t.closePath();t.fillStyle=c;t.fill();u.shadow.enabled&&(t.shadowColor="transparent");u.caption.text!=""?(l=t.createLinearGradient(o,e,o,e+30),l.addColorStop(0,u.caption.color),l.addColorStop(.5,u.caption.color),l.addColorStop(1,u.caption.colorTo),t.beginPath(),t.moveTo(o,e+u.radius),f?(t.lineTo(o,s-u.radius),t.quadraticCurveTo(o,s,o+u.radius,s),t.lineTo(h-u.radius,s),t.quadraticCurveTo(h,s,h,s-u.radius)):(t.lineTo(o,e+30),t.lineTo(h,e+30)),t.lineTo(h,e+u.radius),t.quadraticCurveTo(h,e,h-u.radius,e),t.lineTo(o+u.radius,e),t.quadraticCurveTo(o,e,o,e+u.radius),t.closePath(),t.fillStyle=l,t.fill()):u.caption.side&&(a=t.createLinearGradient(o,e,o,s),a.addColorStop(0,u.caption.color),a.addColorStop(.4,u.caption.color),a.addColorStop(1,u.caption.colorTo),t.beginPath(),u.direction=="ltr"?(t.moveTo(o,e+u.radius),t.lineTo(o,s-u.radius),t.quadraticCurveTo(o,s,o+u.radius,s),t.lineTo(o+2*u.imgX+50,s),t.lineTo(o+2*u.imgX+50,e),t.lineTo(o+u.radius,e),t.quadraticCurveTo(o,e,o,e+u.radius)):(t.moveTo(h-(2*u.imgX+50),e),t.lineTo(h-(2*u.imgX+50),s),t.lineTo(h-u.radius,s),t.quadraticCurveTo(h,s,h,s-u.radius),t.lineTo(h,e+u.radius),t.quadraticCurveTo(h,e,h-u.radius,e),t.lineTo(h-(2*u.imgX+50),e)),t.closePath(),t.fillStyle=a,t.fill());y=null!=u.image?35:10;p=u.direction=="ltr"?y+u.mleft:i-y-u.mright;t.textAlign=u.direction=="ltr"?"left":"right";t.textBaseline="middle";t.fillStyle=u.caption.fontColor;t.font="bold "+u.caption.fontSize+"px "+u.caption.fontFamily;n.browser.safari?(v=u.caption.fontSize,w=t.measureText(u.caption.text).width,w>i-80-u.mleft-u.mright&&(v=Math.floor(v*((i-80-u.mleft-u.mright)/w)),t.font=v+"px "+u.caption.fontFamily),t.fillText(u.caption.text,p,e+15)):i>150&&t.fillText(u.caption.text,p,e+15,i-75-u.mleft-u.mright)}function s(n,t,i,r){for(var f=r.mtop,o=i-r.mbottom,e=r.mleft,s=t-r.mright,c=r.border.width,h=.7,u=0;u<c;u++)n.beginPath(),n.moveTo(e+u,f+r.radius+u),n.lineTo(e+u,o-r.radius-u),n.quadraticCurveTo(e+u,o-u,e+r.radius+u,o-u),n.lineTo(s-r.radius-u,o-u),n.quadraticCurveTo(s-u,o-u,s-u,o-r.radius-u),n.lineTo(s-u,f+r.radius+u),n.quadraticCurveTo(s-u,f+u,s-r.radius-u,f+u),n.lineTo(e+r.radius+u,f+u),n.quadraticCurveTo(e+u,f+u,e+u,f+r.radius+u),n.closePath(),n.strokeStyle=w(r.border.color,h),n.stroke(),h-=1/c,h<0&&(h=0)}function h(n,t,i,r){r.complete&&null!=i.image&&t.drawImage(r,i.direction=="ltr"?i.imgX+i.mleft:n.width-i.imgX-50-i.mright,i.imgY+i.mtop,50,50)}function c(n,t,i,r,u,f,e,o){r.complete&&null!=i.image&&(e=="all"||e=="main")&&t.drawImage(r,i.direction=="ltr"?7+i.mleft:n.width-i.mright-32,i.mtop+3,25,25);i.caption.collapsing&&u.complete&&f.complete&&(e=="all"||e=="tool")&&t.drawImage(o?f:u,i.direction=="ltr"?n.width-i.mright-23:i.mleft+7,i.mtop+7,16,16)}function f(n,i,r){var u=t[n].options,f=t[n].container.cvs,e=t[n].container.ctx,o=t[n].image,s=t[n].imgMinus,l=t[n].imgPlus;typeof i=="undefined"&&(i="all");typeof r=="undefined"&&(r=u.caption.collapsed);u.caption.text!=""?c(f,e,u,o,s,l,i,r):h(f,e,u,o)}function r(n,i,r){var e=t[n].options,u=t[n].container.cvs,h=t[n].container.ctx,c=t[n].image;"undefined"==typeof r&&(r=u.height);u.height=i?e.mtop+30+e.mbottom:r;h.clearRect(0,0,u.width,u.height);o(h,u.width,u.height,e,i);f(n,"all",i);e.border.width>0&&s(h,u.width,u.height,e)}function d(n,t,i){var r=n.getContext("2d");r.clearRect(0,0,n.width,n.height);o(r,n.width,n.height,t);h(n,r,t,i);t.border.width>0&&s(r,n.width,n.height,t)}function g(n,t,i,r,u,f){var e=n.getContext("2d");e.clearRect(0,0,n.width,n.height);o(e,n.width,n.height,t,f);c(n,e,t,i,r,u,"all",f);t.border.width>0&&s(e,n.width,n.height,t)}function l(t,i){if(t){var u=t.container.cvs,s=t.container.cnt,r=t.options,h=t.container.body,o=n(s).parent(0).width(),f=n(h).innerHeight(),e=t.options.caption;(i||u.width!=o||u.height!=f+r.mtop+r.mbottom)&&(u.width=o,e.text==""?(u.height=r.mtop+f+r.mbottom,d(u,r,t.image,t.image.complete)):(u.height=r.mtop+30+(e.collapsed?0:f)+r.mbottom,g(u,r,t.image,t.imgMinus,t.imgPlus,e.collapsed)))}}function a(i){t.length>0&&n.each(t,function(n,t){l(t,i)})}function v(n,t,i,r){this.container=n;this.options=t;this.caption=i;this.isDrawing=!1;this.index=r;this.image=new Image;this.imgMinus=new Image;this.imgPlus=new Image}var i={alert:{image:"alert-b.png",color:"#fdcbc9",colorTo:"#fb7d78",fontColor:"#000000",border:{width:5,color:"#f9574f"},caption:{fontColor:"#ffffff",color:"#1d1a1a",colorTo:"#504848"}},black:{image:"earth-b.png",color:"#3b3b3b",colorTo:"#000000",fontColor:"#ffffff",border:{width:0,color:"#535353"},caption:{fontColor:"#ffffff",color:"#1d1a1a",colorTo:"#504848"}},download:{image:"download-b.png",color:"#78c0f7",colorTo:"#2e7cb9",fontColor:"#000000",border:{width:5,color:"#15609a"},caption:{fontColor:"#ffffff",color:"#1d1a1a",colorTo:"#504848"}},info:{image:"info-b.png",color:"#a1ea94",colorTo:"#79b06e",fontColor:"#000000",border:{width:0,color:"#6c9c62"},caption:{fontColor:"#ffffff",color:"#1d1a1a",colorTo:"#504848"}},warning:{image:"warning-2-b.png",color:"#f8fc91",colorTo:"#f0d208",fontColor:"#000000",border:{width:0,color:"#d9be08"},caption:{fontColor:"#ffffff",color:"#1d1a1a",colorTo:"#504848"}}},e={caption:{text:"",fontFamily:"Impact, Verdana",fontSize:12,collapsed:!1,collapsing:!0,imgMinus:"minus.png",imgPlus:"plus.png",duration:500,side:!0},imgX:5,imgY:10,radius:10,direction:"ltr",mtop:10,mright:10,mbottom:10,mleft:10,safe:!1,shadow:{enabled:!0,offsetX:7,offsetY:7,blur:5,alpha:.15,color:"#000000"},textShadow:{enabled:!0,offsetX:1,offsetY:1,blur:3,alpha:.15,color:"#000000"},handlers:[{hClass:"a[id^=tabs]",hEvent:"click"},{hClass:"li[id^=tabs]",hEvent:"click"}]},t=[];stbThemes=new p;stbThemes.register("alert",i.alert);stbThemes.register("black",i.black);stbThemes.register("download",i.download);stbThemes.register("info",i.info);stbThemes.register("warning",i.warning);jQuery.fn.extend({stb:function(i,e){var o=k(i,e);return this.each(function(){var i={},k,e=n(this).attr("id"),c=n(this).data("stb"),d=n(this).css("line-height"),h,l,a,p,w,s,it,rt;try{k=typeof c=="string"?new Function("return "+c)():c;typeof k=="object"?n.extend(!0,i,o,k):i=o}catch(ut){u("Unable to parse HTML5 attribute data: "+c)}var g=i.caption.side?50+2*i.imgX+10+"px":"50px",nt={boxSizing:"content-box",lineHeight:d,direction:i.direction,unicodeBidi:"embed",color:i.fontColor,position:"absolute",top:"0px",zIndex:4,margin:i.mtop+"px "+i.mright+"px "+i.mbottom+"px "+i.mleft+"px",paddingRight:i.image==null?"10px":i.direction=="ltr"?"10px":g,paddingBottom:"10px",paddingTop:"10px",paddingLeft:i.image==null?"10px":i.direction=="ltr"?g:"10px",minHeight:"40px",textShadow:i.textShadow.enabled?i.textShadow.color+" "+i.textShadow.offsetX+"px "+i.textShadow.offsetY+"px "+i.textShadow.blur+"px":"none"},tt={boxSizing:"content-box",lineHeight:d,direction:i.direction,unicodeBidi:"embed",position:"absolute",top:30+i.mtop,color:i.fontColor,padding:"5px 10px 10px",minHeight:"5px",margin:"0px "+i.mright+"px "+i.mbottom+"px "+i.mleft+"px",zIndex:4,textShadow:i.textShadow.enabled?i.textShadow.color+" "+i.textShadow.offsetX+"px "+i.textShadow.offsetY+"px "+i.textShadow.blur+"px":"none"};typeof e=="undefined"&&(e="stb_js_"+y(1e3,9999),n(this).attr("id",e));s="#"+e+"_canvas";it="#"+e+"_ccanvas";i.caption.text==""?(n(this).css(nt),n(this).wrap('<div id="'+e+'_container" class="stb-container"><\/div>'),n("#"+e+"_container").css({direction:i.direction,position:"relative",boxSizing:"content-box"}),n(this).before('<canvas id="'+e+'_canvas" class="stb-canvas" width="0" height="0" ><\/canvas>'),n(s).css({position:"relative",top:0,left:0,boxSizing:"content-box"}),h=n(s).get(0),l=h.getContext("2d"),a=n(this).get(0),p=n(this),w=new v({cnt:a,cvs:h,ctx:l,body:p},i,i.caption,t.length)):(n(this).css(tt).wrap('<div id="'+e+'_container" class="stb-container" style="line-height: 0.1em;"><\/div>'),n("#"+e+"_container").css({direction:i.direction,position:"relative",boxSizing:"content-box"}),n(this).before('<canvas id="'+e+'_canvas" class="stb-canvas" width="0" height="0" ><\/canvas>'),n(s).css({position:"relative",left:0,boxSizing:"content-box"}),rt=n("body").css("direction"),i.safe&&n(s).css({position:"relative",top:0,left:0}),h=n(s).get(0),l=h.getContext("2d"),a=n(this).get(0),p=n(this),w=new v({cnt:a,cvs:h,ctx:l,body:p},i,i.caption,t.length),i.caption.collapsing&&n(s).click(function(u){if(pos=b(u),pos.x>i.mleft&&pos.x<n(this).width()-i.mright&&pos.y>i.mtop&&pos.y<i.mtop+30){var o=n(this).attr("id"),f="#"+o.replace("_canvas",""),s=f+"_canvas",e=n(f).data("stb_props");n(f).is(":hidden")?(r(e.index,!1),n(f).slideDown({duration:e.caption.duration,progress:function(){var t=n(this).innerHeight()+30+i.mtop+i.mbottom;r(e.index,!1,t)},done:function(){var i=n(f).data("stb_props");i.caption.collapsed=!1;t[i.index].caption.collapsed=!1;n(f).data("stb_props",i);r(i.index,!1)}})):n(f).slideUp({duration:e.caption.duration,progress:function(){var t=n(this).innerHeight()+30+i.mtop+i.mbottom;r(e.index,!1,t)},done:function(){var i=n(f).data("stb_props");i.caption.collapsed=!0;t[i.index].caption.collapsed=!0;n(f).data("stb_props",i);r(i.index,!0)}})}}));t.push(w);n.data(t[t.length-1].image,"itemIndex",t.length-1);n.data(t[t.length-1].imgMinus,"itemIndex",t.length-1);n.data(t[t.length-1].imgPlus,"itemIndex",t.length-1);t[t.length-1].options.image!=null&&(t[t.length-1].image.onload=function(){var t=n.data(this,"itemIndex");f(t,"main")},t[t.length-1].image.src=t[t.length-1].options.image);t[t.length-1].imgMinus.onload=function(){var t=n.data(this,"itemIndex");f(t,"tool")};t[t.length-1].imgMinus.src=t[t.length-1].options.caption.imgMinus;t[t.length-1].imgPlus.onload=function(){var t=n.data(this,"itemIndex");f(t,"tool")};t[t.length-1].imgPlus.src=t[t.length-1].options.caption.imgPlus;n(this).data("stb_props",w).addClass("stb-body");i.caption.collapsed&&n(this).hide()}),a(!0),!1},stbRedraw:function(){this.each(function(){var t=n(this).data("stb_props");l(t,!0)})}});n(window).resize(function(){return a(!0),!1})})(jQuery)