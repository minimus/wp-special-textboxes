{"version":3,"sources":["../js-src/wstb.edit.js"],"names":[],"mappings":"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","file":"wstb.edit.min.js","sourcesContent":["const stb = stb || {};\nconst mediaStrings = stbUserOptions.strings;\n\n(function($) {\n  let media;\n\n  stb.media = media = {\n    jsId: '#selJsImg',\n    cssId: '#selCssImg',\n    jsImgUrl: '#js_image',\n    cssImgUrl: '#css_big_image',\n\n    init: function() {\n      $(this.jsId).on( 'click', {mode: 'js'}, this.openMediaDialog );\n      $(this.cssId).on( 'click', {mode: 'css'}, this.openMediaDialog );\n    },\n\n    openMediaDialog: function( e ) {\n      e.preventDefault();\n\n      const mode = e.data.mode;\n\n      if ( this._frame ) {\n        this._frame.open();\n        return;\n      }\n\n      this._frame = media.frame = wp.media({\n        title: mediaStrings.title,\n        button: {\n          text: mediaStrings.update\n        },\n        multiple: false,\n        library: {\n          type: 'image'\n        }\n      });\n\n      this._frame.on('ready', function() {\n        //\n      });\n\n      this._frame.state( 'library' ).on('select', function() {\n        const attachment = this.get( 'selection' ).single();\n        media.handleMediaAttachment( attachment, mode );\n      });\n\n      this._frame.open();\n    },\n\n    handleMediaAttachment: function( a, mode ) {\n      const attachment = a.toJSON();\n      if(mode === 'js') $(this.jsImgUrl).val(attachment.url);\n      else $(this.cssImgUrl).val(attachment.url);\n    }\n  };\n\n  function sanitizeOptions(opts) {\n    if(typeof(opts.radius) === 'string') opts.radius = parseInt(opts.radius);\n    if(typeof(opts.imgX) === 'string') opts.imgX = parseInt(opts.imgX);\n    if(typeof(opts.imgY) === 'string') opts.imgY = parseInt(opts.imgY);\n    \n    return opts;\n  }\n  \n  $(document).ready(function() {\n    const theme = $('#style_slug').val();\n    const thm = {\n      image: $('#js_image').val(),\n      color: '#' + $('#js_color').val(),\n      colorTo: '#' + $('#js_color_to').val(),\n      fontColor: '#' + $('#js_font_color').val(),\n      border: {\n        width: $('#js_border_width').val(),\n        color: '#' + $('#js_border_color').val()\n      },\n      caption: {\n        fontColor: '#' + $('#js_caption_font_color').val(),\n        color: '#' + $('#js_caption_color').val(),\n        colorTo: '#' + $('#js_caption_color_to').val()\n      }\n    };\n    const opts = sanitizeOptions(stbUserOptions.jsOptions);\n    const cpOpts = opts.pickerOptions;\n    const options = {direction: 'vertical'};\n    if('Undefined' !== theme) $('#js_test, #js_test_cap').stb(thm, opts);\n\n    media.init();\n\n    const cssOpts = stbUserOptions.cssOptions;\n    function callback(cnt) {\n      cnt.toggleClass('stb-hidden').toggleClass('stb-visible');\n      return false;\n    }\n\n    $('.stb-tool').on('click', function() {\n      const id = $(this).attr('id').split('-');\n      const idn = id[2];\n      const cnt = $('#stb-container-' + idn);\n      const sb = $('#stb-body-box-' + idn);\n      const si = $('#stb-toolimg-' + idn);\n      if(cnt.hasClass('stb-visible')) {\n        sb.hide('blind', options, 500, () => (callback(cnt)));\n        si.attr({'src': cssOpts.imgShow, 'title': cssOpts.strShow});\n      }\n      else {\n        sb.show('blind', options, 500, () => (callback(cnt)));\n        si.attr({'src': cssOpts.imgHide, 'title': cssOpts.strHide});\n      }\n      return false;\n    });\n\n    try {\n      $('.color-btn').smallColorPicker({\n        placement: { popup: true },\n        texts: cpOpts.texts\n      }).on({\n        scp_ok: function(p,c) {\n          $('#' + p.target.id.replace(\"-button\", '')).val(c.replace('#', ''));\n          $('#' + p.target.id).html('<b style=\"background-color: ' + c + ';\"></b>' + c.replace('#', '').toUpperCase());\n        }\n      });\n    } catch (err) {\n      // the browser is not supported\n    }\n  });\n})(jQuery);"]}