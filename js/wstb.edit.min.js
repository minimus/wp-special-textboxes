/**
 * Created with JetBrains PhpStorm.
 * Author: minimus
 * Date: 20.10.13
 * Time: 16:42
 */
(function(e){function t(e){if(typeof e.radius=="string")e.radius=parseInt(e.radius);if(typeof e.imgX=="string")e.imgX=parseInt(e.imgX);if(typeof e.imgY=="string")e.imgY=parseInt(e.imgY);return e}e(document).ready(function(){function u(t,n,r){if(t.css("display")=="none"){n.css({"margin-bottom":stbUserOptions.cssOptions.mbottom+"px"});r.attr({src:stbUserOptions.cssOptions.imgShow,title:stbUserOptions.cssOptions.strShow});if(stbUserOptions.cssOptions.roundedCorners){n.css({"-webkit-border-bottom-left-radius":"5px","-webkit-border-bottom-right-radius":"5px","-moz-border-radius-bottomleft":"5px","-moz-border-radius-bottomright":"5px","border-bottom-left-radius":"5px","border-bottom-right-radius":"5px"})}}else{r.attr({src:stbUserOptions.cssOptions.imgHide,title:stbUserOptions.cssOptions.strHide})}e(this).parent().parent().children("#caption").css({"margin-bottom":stbUserOptions.cssOptions.mbottom+"px"});return false}var n=e("#style_slug").val(),r={image:e("#js_image").val(),color:"#"+e("#js_color").val(),colorTo:"#"+e("#js_color_to").val(),fontColor:"#"+e("#js_font_color").val(),border:{width:e("#js_border_width").val(),color:"#"+e("#js_border_color").val()},caption:{fontColor:"#"+e("#js_caption_font_color").val(),color:"#"+e("#js_caption_color").val(),colorTo:"#"+e("#js_caption_color_to").val()}},i=t(stbUserOptions.jsOptions),s=i.pickerOptions,o={direction:"vertical"};if("Undefined"!=n)e("#js_test, #js_test_cap").stb(r,i);e(".stb-tool").bind("click",function(){var t=e(this).attr("id").split("-"),n=t[2],r=e(this).parent().parent().children("#stb-body-box-"+n),i=e(this).parent().parent().children("#stb-caption-box-"+n),s=e(this).children("#stb-toolimg-"+n);if(r.css("display")!="none"){r.hide("blind",o,500,function(){u(r,i,s)})}else{r.show("blind",o,500,function(){u(r,i,s)});i.css({"margin-bottom":"0px"});if(stbUserOptions.cssOptions.roundedCorners){i.css({"-webkit-border-bottom-left-radius":"0px","-webkit-border-bottom-right-radius":"0px","-moz-border-radius-bottomleft":"0px","-moz-border-radius-bottomright":"0px","border-bottom-left-radius":"0px","border-bottom-right-radius":"0px"})}}return false});try{e(".color-btn").smallColorPicker({placement:{popup:true},texts:s.texts}).on({scp_ok:function(t,n){e("#"+t.target.id.replace("-button","")).val(n.replace("#",""));e("#"+t.target.id).html('<b style="background-color: '+n+';"></b>'+n.replace("#","").toUpperCase())}})}catch(a){}})})(jQuery)