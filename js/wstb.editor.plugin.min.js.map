{"version":3,"sources":["../js-src/wstb.editor.plugin.js"],"names":[],"mappings":"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","file":"wstb.editor.plugin.min.js","sourcesContent":["/**\n * Created by minimus on 18.06.2017.\n */\n(function () {\n  function createColorPickAction() {\n    const ed = tinymce.activeEditor;\n    const colorPickerCallback = ed.settings.color_picker_callback;\n\n    if (colorPickerCallback) {\n      return function() {\n        const self = this;\n\n        colorPickerCallback.call(ed, (value) => self.value(value).fire('change'), self.value());\n      };\n    }\n  }\n\n  const styleList = stbEditorOptions.list;\n\n  tinymce.PluginManager.requireLangPack('wstb');\n\n  tinymce.create('tinymce.plugins.wstb', {\n\n    init: function (ed, url) {\n      this.editor = ed;\n      const title = ed.getLang('wstb.title');\n\n      ed.addCommand('wstb', () => {\n        const se = ed.selection;\n\n        // No selection\n        if (se.isCollapsed())  return;\n\n        ed.windowManager.open({\n          width: 560,\n          height: 530,\n          inline: 1,\n          title: ed.getLang('wstb.title'),\n          bodyType: 'tabpanel',\n          body: [\n            {\n              type: 'form',\n              name: 'wstb_tab_general',\n              title: ed.getLang('wstb.basic_tab'),\n              minWidth: 558,\n              items: [\n                {\n                  type: 'listbox',\n                  name: 'wstb_id',\n                  label: ed.getLang('wstb.box_id'),\n                  values: styleList\n                },\n                {\n                  type   : 'textbox',\n                  name   : 'wstb_caption',\n                  label  : ed.getLang('wstb.caption')\n                },\n                {\n                  type   : 'checkbox',\n                  name   : 'wstb_default_caption',\n                  text   : ed.getLang('wstb.default_caption'),\n                  checked : false\n                },\n                {\n                  type   : 'label',\n                  name   : 'collapsing_label',\n                  text   : ed.getLang('wstb.block_collapsing')\n                },\n                {\n                  type: 'listbox',\n                  name: 'wstb_collapsing',\n                  values: [\n                    {text: ed.getLang('wstb.default'), value: 'default', selected: 1},\n                    {text: ed.getLang('wstb.yes'), value: 'yes'},\n                    {text: ed.getLang('wstb.no'), value: 'no'},\n                  ]\n                },\n                {\n                  type   : 'label',\n                  name   : 'collapsed_label',\n                  text   : ed.getLang('wstb.collapsed')\n                },\n                {\n                  type: 'listbox',\n                  name: 'wstb_collapsed',\n                  values: [\n                    {text: ed.getLang('wstb.default'), value: 'default', selected: 1},\n                    {text: ed.getLang('wstb.yes'), value: 'yes'},\n                    {text: ed.getLang('wstb.no'), value: 'no'},\n                  ]\n                },\n                {\n                  type   : 'label',\n                  name   : 'mode_label',\n                  text   : ed.getLang('wstb.drawing_mode')\n                },\n                {\n                  type: 'listbox',\n                  name: 'wstb_mode',\n                  values: [\n                    {text: ed.getLang('wstb.default'), value: 'default', selected: 1},\n                    {text: 'CSS', value: 'css'},\n                    {text: 'JavaScript', value: 'js'},\n                  ]\n                },\n                {\n                  type   : 'label',\n                  name   : 'dir_label',\n                  text   : ed.getLang('wstb.direction')\n                },\n                {\n                  type: 'listbox',\n                  name: 'wstb_dir',\n                  values: [\n                    {text: ed.getLang('wstb.default'), value: 'default', selected: 1},\n                    {text: ed.getLang('wstb.left_to_right'), value: 'ltr'},\n                    {text: ed.getLang('wstb.right_to_left'), value: 'rtl'},\n                  ]\n                },\n                {\n                  type   : 'label',\n                  name   : 'dir_label',\n                  text   : ed.getLang('wstb.shadow')\n                },\n                {\n                  type: 'listbox',\n                  name: 'wstb_shadow',\n                  values: [\n                    {text: ed.getLang('wstb.default'), value: 'default', selected: 1},\n                    {text: ed.getLang('wstb.enable'), value: 'true'},\n                    {text: ed.getLang('wstb.disable'), value: 'false'},\n                  ]\n                }\n              ]\n            },\n            {\n              type: 'form',\n              name: 'wstb_tab_extended',\n              title: ed.getLang('wstb.extended_tab'),\n              minWidth: 558,\n              items: [\n                {\n                  type   : 'label',\n                  name   : 'image_label',\n                  text   : ed.getLang('wstb.image')\n                },\n                {\n                  type   : 'textbox',\n                  name   : 'wstb_image_url',\n                  label  : ed.getLang('wstb.image_url')\n                },\n                {\n                  type   : 'checkbox',\n                  name   : 'wstb_big_image',\n                  text   : ed.getLang('wstb.image_big'),\n                  checked : false\n                },\n                {\n                  type   : 'checkbox',\n                  name   : 'wstb_noimage',\n                  text   : ed.getLang('wstb.image_no'),\n                  checked : false\n                },\n                {\n                  type   : 'label',\n                  name   : 'margins_label',\n                  text   : ed.getLang('wstb.margins')\n                },\n                {\n                  type   : 'textbox',\n                  name   : 'wstb_top_margin',\n                  label  : ed.getLang('wstb.margin_top')\n                },\n                {\n                  type   : 'textbox',\n                  name   : 'wstb_right_margin',\n                  label  : ed.getLang('wstb.margin_right')\n                },\n                {\n                  type   : 'textbox',\n                  name   : 'wstb_bottom_margin',\n                  label  : ed.getLang('wstb.margin_bottom')\n                },\n                {\n                  type   : 'textbox',\n                  name   : 'wstb_left_margin',\n                  label  : ed.getLang('wstb.margin_left')\n                },\n                {\n                  type   : 'label',\n                  name   : 'floating_label',\n                  text   : ed.getLang('wstb.floating_mode_settings')\n                },\n                {\n                  type   : 'checkbox',\n                  name   : 'wstb_float',\n                  text   : ed.getLang('wstb.floating_mode'),\n                  checked : false\n                },\n                {\n                  type: 'listbox',\n                  name: 'wstb_align',\n                  label: ed.getLang('wstb.alignment'),\n                  values: [\n                    {text: ed.getLang('wstb.left'), value: 'left', selected: 1},\n                    {text: ed.getLang('wstb.right'), value: 'right'}\n                  ]\n                },\n                {\n                  type   : 'textbox',\n                  name   : 'wstb_width',\n                  label  : ed.getLang('wstb.box_width')\n                }\n              ]\n            },\n            {\n              type: 'form',\n              name: 'wstb_tab_colors',\n              title: ed.getLang('wstb.colors'),\n              minWidth: 558,\n              items: [\n                {\n                  type   : 'label',\n                  name   : 'colors_label',\n                  text   : ed.getLang('wstb.colors')\n                },\n                {\n                  type   : 'colorbox',\n                  name   : 'wstb_fcolor',\n                  label  : ed.getLang('wstb.text'),\n                  onaction: createColorPickAction(),\n                },\n                {\n                  type   : 'colorbox',\n                  name   : 'wstb_bgcolor',\n                  label  : ed.getLang('wstb.background'),\n                  onaction: createColorPickAction(),\n                },\n                {\n                  type   : 'colorbox',\n                  name   : 'wstb_bgcolorto',\n                  label  : ed.getLang('wstb.stop'),\n                  onaction: createColorPickAction(),\n                },\n                {\n                  type   : 'colorbox',\n                  name   : 'wstb_cfcolor',\n                  label  : ed.getLang('wstb.caption_text'),\n                  onaction: createColorPickAction(),\n                },\n                {\n                  type   : 'colorbox',\n                  name   : 'wstb_cbgcolor',\n                  label  : ed.getLang('wstb.caption_background'),\n                  onaction: createColorPickAction(),\n                },\n                {\n                  type   : 'colorbox',\n                  name   : 'wstb_cbgcolorto',\n                  label  : ed.getLang('wstb.caption_stop'),\n                  onaction: createColorPickAction(),\n                },\n                {\n                  type   : 'label',\n                  name   : 'border_label',\n                  text   : ed.getLang('wstb.border')\n                },\n                {\n                  type   : 'colorbox',\n                  name   : 'wstb_bcolor',\n                  label  : ed.getLang('wstb.border_color'),\n                  onaction: createColorPickAction(),\n                },\n                {\n                  type   : 'textbox',\n                  name   : 'wstb_bwidth',\n                  label  : ed.getLang('wstb.border_width'),\n                  tooltip: ed.getLang('wstb.border_width')\n                }\n              ]\n            }\n          ],\n          buttons: [\n            {text: ed.getLang('wstb.insert'), onclick: 'submit'},\n            {text: ed.getLang('wstb.cancel'), onclick: 'close'}\n          ],\n          onsubmit: function (e) {\n            const radio = e.data.wstb_collapsed;\n            const cRadio = e.data.wstb_collapsing;\n            const mRadio = e.data.wstb_mode;\n            const dRadio = e.data.wstb_dir;\n            const sRadio = e.data.wstb_shadow;\n\n            const wstbID = e.data.wstb_id;\n            const wstbCaption = e.data.wstb_caption;\n            const wstbDefCap = e.data.wstb_default_caption;\n            const wstbFloat = e.data.wstb_float;\n            const wstbAlign = e.data.wstb_align;\n            const wstbWidth = e.data.wstb_width;\n            const wstbColor = e.data.wstb_fcolor.replace(\"#\", \"\");\n            const wstbCColor = e.data.wstb_cfcolor.replace(\"#\", \"\");\n            const wstbBGColor = e.data.wstb_bgcolor.replace(\"#\", \"\");\n            const wstbCBGColor = e.data.wstb_cbgcolor.replace(\"#\", \"\");\n            const wstbBGColorTo = e.data.wstb_bgcolorto.replace(\"#\", \"\");\n            const wstbCBGColorTo = e.data.wstb_cbgcolorto.replace(\"#\", \"\");\n            const wstbBColor = e.data.wstb_bcolor.replace(\"#\", \"\");\n            const wstbBWidth = e.data.wstb_bwidth;\n            const wstbImage = e.data.wstb_image_url;\n            const wstbBigImage = e.data.wstb_big_image;\n            const wstbNoImage = e.data.wstb_noimage;\n            const wstbLeftMargin = e.data.wstb_left_margin;\n            const wstbRightMargin = e.data.wstb_right_margin;\n            const wstbTopMargin = e.data.wstb_top_margin;\n            const wstbBottomMargin = e.data.wstb_bottom_margin;\n\n            const wstbCollapsing = (cRadio === 'default') ? 0 : ((cRadio === 'yes') ? 1 : 2);\n            const wstbCollapsed = (radio === 'default') ? 0 : ((radio === 'yes') ? 1 : 2);\n            const wstbShadow = (sRadio === 'default') ? 0 : ((sRadio === 'enabled') ? 1 : 2);\n\n            // Caption\n            let caption = '';\n            if (wstbCaption !== '' || wstbDefCap) {\n              if (wstbDefCap) caption = ' defcaption=\"true\"';\n              else caption = ` caption='${wstbCaption}'`;\n\n              if (wstbCollapsing === 1) caption += ' collapsing=\"true\"';\n              else if(wstbCollapsing === 2) caption += ' collapsing=\"false\"';\n\n              if ((wstbCollapsed === 1) && (wstbCollapsing !== 2)) caption += ' collapsed=\"true\"';\n              else if(wstbCollapsed === 2) caption += ' collapsed=\"false\"';\n            }\n\n            // Mode, direction, shadow\n            const mode = (mRadio !== 'default') ? ` mode='${mRadio}'` : '';\n            const dir = (dRadio !== 'default') ? ` direction='${dRadio}'` : '';\n            let shadow = '';\n            if(wstbShadow === 1) shadow = ' shadow=\"true\"';\n            else if(wstbShadow === 2) shadow = ' shadow=\"false\"';\n\n            // Float Mode\n            let float = '';\n            if (wstbFloat) {\n              float += ` float=\"true\" align='${wstbAlign}'`;\n              if (wstbWidth !== '') float += ` width='${wstbWidth}'`;\n            }\n\n            // Colors\n            let colors = '';\n            if (wstbBWidth !== '') colors += ` bwidth='${wstbBWidth}'`;\n            if (wstbColor !== '') colors += ` color='${wstbColor}'`;\n            if (wstbCColor !== '') colors += ` ccolor='${wstbCColor}'`;\n            if (wstbBColor !== '') colors += ` bcolor='${wstbBColor}'`;\n            if (wstbBGColor !== '') colors += ` bgcolor='${wstbBGColor}'`;\n            if (wstbCBGColor !== '') colors += ` cbgcolor='${wstbCBGColor}'`;\n            if (wstbBGColorTo !== '') colors += ` bgcolorto='${wstbBGColorTo}'`;\n            if (wstbCBGColorTo !== '') colors += ` cbgcolorto='${wstbCBGColorTo}'`;\n\n            // Margins\n            let margins = '';\n            if (wstbLeftMargin !== '') margins += ` mleft='${wstbLeftMargin}'`;\n            if (wstbRightMargin !== '') margins += ` mright='${wstbRightMargin}'`;\n            if (wstbTopMargin !== '') margins += ` mtop='${wstbTopMargin}'`;\n            if (wstbBottomMargin !== '') margins += ` mbottom='${wstbBottomMargin}'`;\n\n            // Image\n            let image = '';\n            if ((wstbImage !== '') && !wstbNoImage) image += ` image='${wstbImage}'`;\n            if (wstbBigImage) image += \" big='true'\";\n            if (wstbNoImage) image = \" image='null'\";\n\n            const wstbAttrs = `${caption}${mode}${dir}${shadow}${float}${colors}${image}`;\n\n            const wstbBody =  ed.selection.getContent();\n\n            const wstbCode = `[stextbox id='${wstbID}'${wstbAttrs}]${wstbBody}[/stextbox]`;\n\n            ed.insertContent(wstbCode);\n          }\n        });\n      });\n\n      ed.addButton('wstb', {\n        title: title, //'Insert Special Text Box',\n        cmd: 'wstb',\n        image: url + '/img/wstb.png'\n      });\n\n      ed.on(\"NodeChange\", () => {\n        ed.controlManager.setDisabled(\"wstb\", ed.selection.isCollapsed());\n      });\n    },\n\n    getInfo: function () {\n      return {\n        longname: 'Special Text Boxes',\n        author: 'minimus',\n        authorurl: 'http://blogcoding.ru',\n        infourl: 'http://www.simplelib.com',\n        version: \"5.1.88\"\n      };\n    }\n  });\n\n  tinymce.PluginManager.add('wstb', tinymce.plugins.wstb);\n})();"]}